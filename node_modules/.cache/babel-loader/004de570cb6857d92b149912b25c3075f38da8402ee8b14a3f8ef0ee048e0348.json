{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sistemas\\\\Pictures\\\\nuevo ole mita web+tienda\\\\src\\\\components\\\\AdminGaleria.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { db } from \"../firebase\";\nimport { collection, getDocs, addDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLOUDINARY_URL = \"https://api.cloudinary.com/v1_1/djjxxdayz/image/upload\";\nconst CLOUDINARY_UPLOAD_PRESET = \"olemitaweb\";\nconst AdminGaleria = () => {\n  _s();\n  const [imagenes, setImagenes] = useState([]);\n  const [titulo, setTitulo] = useState(\"\");\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  useEffect(() => {\n    const fetchGaleria = async () => {\n      const querySnapshot = await getDocs(collection(db, \"galeria\"));\n      setImagenes(querySnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      })));\n    };\n    fetchGaleria();\n  }, []);\n\n  // SUBIR IMAGEN A CLOUDINARY Y GUARDAR EN FIRESTORE\n  const handleUpload = async () => {\n    if (!selectedFile) {\n      alert(\"Selecciona una imagen\");\n      return;\n    }\n    setUploading(true);\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"upload_preset\", CLOUDINARY_UPLOAD_PRESET);\n    const res = await axios.post(CLOUDINARY_URL, formData);\n    const imageUrl = res.data.secure_url;\n    await addDoc(collection(db, \"galeria\"), {\n      url: imageUrl,\n      titulo: titulo\n    });\n\n    // Refresca galería\n    const querySnapshot = await getDocs(collection(db, \"galeria\"));\n    setImagenes(querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    })));\n    setTitulo(\"\");\n    setSelectedFile(null);\n    setUploading(false);\n  };\n  const handleDelete = async id => {\n    if (window.confirm(\"¿Eliminar imagen?\")) {\n      await deleteDoc(doc(db, \"galeria\", id));\n      setImagenes(imagenes.filter(img => img.id !== id));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Gestionar Galer\\xEDa Instagram\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow mb-6 flex flex-col md:flex-row gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: e => setSelectedFile(e.target.files[0]),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"T\\xEDtulo (opcional)\",\n        value: titulo,\n        onChange: e => setTitulo(e.target.value),\n        className: \"border p-2 rounded flex-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        className: `bg-orange-600 text-white px-4 py-2 rounded ${uploading ? \"opacity-50 cursor-not-allowed\" : \"\"}`,\n        disabled: uploading,\n        children: uploading ? \"Subiendo...\" : \"Agregar Imagen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\",\n      children: imagenes.map(img => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative group\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: img.url,\n          alt: img.titulo,\n          className: \"rounded shadow w-full h-36 object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), img.titulo && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-center p-1 rounded-b\",\n          children: img.titulo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"absolute top-1 right-1 bg-red-600 text-white rounded-full px-2 py-1 text-xs opacity-80 hover:opacity-100\",\n          onClick: () => handleDelete(img.id),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, img.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminGaleria, \"LFrCJVyzGY9/Tjc32wxLllYcO6M=\");\n_c = AdminGaleria;\nexport default AdminGaleria;\nvar _c;\n$RefreshReg$(_c, \"AdminGaleria\");","map":{"version":3,"names":["React","useState","useEffect","db","collection","getDocs","addDoc","deleteDoc","doc","axios","jsxDEV","_jsxDEV","CLOUDINARY_URL","CLOUDINARY_UPLOAD_PRESET","AdminGaleria","_s","imagenes","setImagenes","titulo","setTitulo","selectedFile","setSelectedFile","uploading","setUploading","fetchGaleria","querySnapshot","docs","map","id","data","handleUpload","alert","formData","FormData","append","res","post","imageUrl","secure_url","url","handleDelete","window","confirm","filter","img","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","e","target","files","placeholder","value","onClick","disabled","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/Sistemas/Pictures/nuevo ole mita web+tienda/src/components/AdminGaleria.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, getDocs, addDoc, deleteDoc, doc } from \"firebase/firestore\";\r\nimport axios from \"axios\";\r\n\r\nconst CLOUDINARY_URL = \"https://api.cloudinary.com/v1_1/djjxxdayz/image/upload\";\r\nconst CLOUDINARY_UPLOAD_PRESET = \"olemitaweb\";\r\n\r\nconst AdminGaleria = () => {\r\n  const [imagenes, setImagenes] = useState([]);\r\n  const [titulo, setTitulo] = useState(\"\");\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchGaleria = async () => {\r\n      const querySnapshot = await getDocs(collection(db, \"galeria\"));\r\n      setImagenes(querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n    };\r\n    fetchGaleria();\r\n  }, []);\r\n\r\n  // SUBIR IMAGEN A CLOUDINARY Y GUARDAR EN FIRESTORE\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) {\r\n      alert(\"Selecciona una imagen\");\r\n      return;\r\n    }\r\n    setUploading(true);\r\n    const formData = new FormData();\r\n    formData.append(\"file\", selectedFile);\r\n    formData.append(\"upload_preset\", CLOUDINARY_UPLOAD_PRESET);\r\n\r\n    const res = await axios.post(CLOUDINARY_URL, formData);\r\n    const imageUrl = res.data.secure_url;\r\n\r\n    await addDoc(collection(db, \"galeria\"), {\r\n      url: imageUrl,\r\n      titulo: titulo\r\n    });\r\n\r\n    // Refresca galería\r\n    const querySnapshot = await getDocs(collection(db, \"galeria\"));\r\n    setImagenes(querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n    setTitulo(\"\");\r\n    setSelectedFile(null);\r\n    setUploading(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm(\"¿Eliminar imagen?\")) {\r\n      await deleteDoc(doc(db, \"galeria\", id));\r\n      setImagenes(imagenes.filter(img => img.id !== id));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Gestionar Galería Instagram</h2>\r\n      <div className=\"bg-white p-4 rounded shadow mb-6 flex flex-col md:flex-row gap-4\">\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={e => setSelectedFile(e.target.files[0])}\r\n          className=\"border p-2 rounded\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Título (opcional)\"\r\n          value={titulo}\r\n          onChange={e => setTitulo(e.target.value)}\r\n          className=\"border p-2 rounded flex-1\"\r\n        />\r\n        <button\r\n          onClick={handleUpload}\r\n          className={`bg-orange-600 text-white px-4 py-2 rounded ${uploading ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n          disabled={uploading}\r\n        >\r\n          {uploading ? \"Subiendo...\" : \"Agregar Imagen\"}\r\n        </button>\r\n      </div>\r\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n        {imagenes.map(img => (\r\n          <div key={img.id} className=\"relative group\">\r\n            <img src={img.url} alt={img.titulo} className=\"rounded shadow w-full h-36 object-cover\" />\r\n            {img.titulo && (\r\n              <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-center p-1 rounded-b\">\r\n                {img.titulo}\r\n              </div>\r\n            )}\r\n            <button\r\n              className=\"absolute top-1 right-1 bg-red-600 text-white rounded-full px-2 py-1 text-xs opacity-80 hover:opacity-100\"\r\n              onClick={() => handleDelete(img.id)}\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminGaleria;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}